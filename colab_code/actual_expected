import pandas as pd
import matplotlib.pyplot as plt
from mpl_toolkits.mplot3d import Axes3D
from io import StringIO

# New data as a CSV string (fixed)
data = """x,y,Expected Value,Function Value
-100.0,50.82295074969133,1.9595692587644666,-0.023458157195513675
-98.0,10.059158624206859,-0.6571251843782907,-0.12237333261363487
-96.0,-86.88006079108396,1.7029050019368006,0.014549366737241347
-94.0,86.32290501152525,-0.2652403120721524,-0.015163581177075633
-92.0,85.73109467401076,-2.1322887373812676,-0.015786104970288463
-90.0,38.00914943020632,1.0537406813353436,-0.03688668662230035
-88.0,32.74815532632104,0.45492002830689643,-0.0443796052988235
-86.0,3.301886748221321,-1.1425860294785486,-0.45792068930855395
-84.0,-85.69999151774381,-0.3624150075101583,0.018208419160399683
-82.0,84.84279750578798,-1.8409854679642126,-0.019208231088587997
-80.0,31.48103106692352,1.250649736493214,-0.05404068849337821
-78.0,-27.548771460796615,-2.460048070215926,0.061794750401940414
-76.0,85.5995918657946,-1.7229834377209043,-0.021695635819072447
-74.0,47.76217202135774,-0.9627027183412434,-0.04081372972849763
-72.0,17.721127008366096,1.8479392351586954,-0.11586344655103739
-70.0,-7.2446179166992835,1.5728743020904987,0.3008353493672459
-68.0,86.778463064232,0.22141475808637123,-0.026293355911025683
-66.0,98.6550354418734,-1.6007522074054155,-0.0245253181779425
-64.0,-95.98022207169927,-0.8733128844199841,0.026699289864504965
-62.0,33.40509648681561,-0.40851213188653784,-0.08261009828824054
-60.0,-59.667523020884985,-1.0114514089429734,0.049083923739008606
-58.0,-57.746960530391945,1.3915307535270351,0.054700594817726725
-56.0,36.21450063673194,-0.09874885893805743,-0.09611130010865665
-54.0,22.41228505142007,-2.7816258097277977,-0.1704496933919056
-52.0,-99.81670304500089,0.7485954823883557,0.04173854540756799
-50.0,2.953778274547929,-1.8324775764250498,-1.6105531742675263
-48.0,-88.33737612944958,2.7682139363914877,0.05950458820894743
-46.0,76.75794416927323,1.2652443789321448,-0.080041147188008
-44.0,33.43826205595067,-0.8638506515719756,-0.2182880746192859
-42.0,-47.577871944369974,-2.634071385868016,0.1781717613368571
-40.0,74.32143057183913,0.035363296462633254,-0.15343097343637704
-38.0,28.4738460995232,-2.1102039471074234,-0.5690834935194959
-36.0,65.52327253993948,-1.049756271526951,-0.40611996846366266
-34.0,-73.78082087563524,0.8682182664119853,0.8509819507769444
-32.0,68.37035934375132,1.7585142558330793,1.1698572998317853
-30.0,-34.68365822396902,-2.6343978697599777,-2.3827028939582093
-28.0,-86.54936021645842,-0.6807362013546042,-0.19902626615948132
-26.0,20.089886946916934,0.2287993394597061,0.5615804245792017
-24.0,82.26614034120968,2.20429372867355,0.10933232945559253
-22.0,-24.801360365170694,2.891178171582071,2.870423580578483
-20.0,35.30414096045405,-0.9239537314564505,0.17553697261905912
-18.0,5.1733080795811475,0.4774244756961256,1.017544909399054
-16.0,21.56705190139509,-2.812179889408869,0.21859657035834273
-14.0,-39.69441502980713,-1.480729522570465,-0.06329964832106111
-12.0,83.59391313184705,-0.39077780679131136,0.04473411259314729
-10.0,56.282216886916046,2.888347248495303,0.06218839773497204
-8.0,11.557745068426499,1.8228507955193687,0.27024077688454523
-6.0,69.82278797205345,1.3785336833113053,0.041459334891632275
-4.0,-34.04592831450148,-2.6532309760165647,-0.0786666708062326
-2.0,48.53156932652908,-1.166259828496278,0.05252379010580872
0.0,-50.34845584271528,1.9931193662189723,-0.0493940874301421
2.0,-10.530116279337491,-0.05619327924906037,-0.21468651013576723
4.0,88.72623499883923,2.3567068736204986,0.0241695025287005
6.0,44.978227361431294,1.2285648701985374,0.04525138310806852
8.0,-97.25779447184118,-2.7395147437310006,-0.01995141548553835
10.0,21.5353665866931,-2.754758472903981,0.08575909493617428
12.0,87.29254040312358,1.2856736458132527,0.02024123832189904
14.0,-28.43291299853901,-1.3179187200645568,-0.06051081664788089
16.0,76.12270979458674,2.487038452283838,0.021327014369617887
18.0,-9.131680575063399,-1.5025886667557637,-0.1701334526771307
20.0,-68.40806991268258,0.9766477776453819,-0.022001749298139774
22.0,-44.438413555416226,0.7955494944645748,-0.032704401341643784
24.0,-31.716310037507142,1.3738732548020516,-0.044470574532219045
26.0,-79.70974799840758,-0.36026218062175286,-0.01696320245960884
28.0,-63.92610134559913,1.9080364974725912,-0.020470004583551266
30.0,-10.230634764228654,-0.7346989008393983,-0.1230182092457786
32.0,-30.15029609870377,-1.879182853859442,0.0567400055841569
34.0,-64.02970044611995,0.7456515467287651,0.08187812767708252
36.0,-88.36407766363224,-2.817777185516132,-0.08445858763480986
38.0,78.97501265864307,1.4396910619495378,-0.013996536926814383
40.0,-84.9633658403015,-1.2870170884886375,-0.015868095181245216
42.0,-44.07351402577456,-0.04987823640166181,-0.03364168687863062
44.0,-22.78155481041001,0.3249521270666886,-0.1344936064895049
46.0,-79.58638479343792,-0.8277166486952924,0.016596097445796626
48.0,16.5970331539427,0.8982771228391543,0.02390176659214678
50.0,31.18611313414361,-1.8810805594295157,-0.00951897803061453
52.0,-23.649520604020877,-1.849701042838166,0.05435377194070009
54.0,51.05948775524652,-2.3680227317468023,0.04743066816041245
56.0,57.82522545453754,1.3041536979795795,-0.08882302676200802
58.0,-79.10436759918786,2.015583861685843,0.1284061430711468
60.0,8.678893732926126,0.4701929424210483,-0.07875273163591576
62.0,-12.676670036068658,1.9098539462250777,-0.01206772816449745
64.0,15.176476830165728,-1.0995385619206855,-0.01230105368160411
66.0,77.44667635223515,0.04570299070577123,0.05184723633023187
68.0,6.405184069190939,1.711687360885653,0.04042409986067864
70.0,3.6412510980314905,-0.042663651688580775,-0.12446811231471758
72.0,91.18654371060009,-0.6164232123257798,-0.04917008836807964
74.0,40.82859475025748,-1.6933210536491313,-0.17024323536508257
76.0,75.29313556608868,1.134640031816236,-0.02842139423786256
78.0,-71.11623721397788,0.18743125872136057,-0.019993077660869925
80.0,36.28979831202536,-0.3298369628821043,0.02418196762308495
82.0,-53.2613375833025,-1.739120648407554,-0.14051190000749383
84.0,27.363835967396053,-1.7750612344203535,-0.054665979172996696
86.0,-26.66307795687412,1.2275729323527736,0.00883427508642749
88.0,-60.22118663987273,-0.3052857479132758,-0.003040560845355953
90.0,48.8976170175547,-0.3132573637097198,-0.08127509362364392
92.0,-20.672447832261752,0.8316863027669317,0.05522496607693147
94.0,-89.79949299223303,-0.1569700521716221,-0.1051789653848691
96.0,-18.74051659913873,0.40104951717834825,-0.03135539121230695
98.0,-9.58984346506184,1.2039732935995788,-0.09144668770622116
"""

# Use StringIO to read the data into a DataFrame
df = pd.read_csv(StringIO(data))

# Check for NaN values in the DataFrame
if df.isnull().values.any():
    print("Warning: Data contains NaN values.")
    # Handle NaN values here if necessary, e.g. df.dropna(inplace=True)

# Create a 3D scatter plot
fig = plt.figure()
ax = fig.add_subplot(111, projection='3d')

# Scatter plot with different colors for points
scatter = ax.scatter(df['x'], df['y'], df['Expected Value'], c='b', label='Wartość oczekiwana')
scatter = ax.scatter(df['x'], df['y'], df['Function Value'], c='r', label='Wartość funkcji')

# Add labels and title
ax.set_xlabel('x')
ax.set_ylabel('y')
ax.set_zlabel('z')
ax.set_title('f(x, y) = sin(x/2) + 2* cos(y) dziedzina x, y: [-100, 100]')

# Add legend
ax.legend()

# Show the plot
plt.show()
